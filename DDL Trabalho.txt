CREATE TABLE Marcas
(
	nome varchar(40) NOT NULL,
    descricao varchar(50),
    id_marca INT PRIMARY KEY NOT NULL
);

CREATE TABLE Categorias
(
	id_categoria INT  PRIMARY KEY NOT NULL,
    nome varchar(40),
    descricao varchar(50)
);

CREATE TABLE Fornecedores 
(
	id_fornecedor INT PRIMARY KEY NOT NULL,
    nome varchar(40) NOT NULL,
    cnpj varchar(18) UNIQUE NOT NULL,
    email VARCHAR(150),
    telefone VARCHAR(18)
);

CREATE TABLE Transportadoras
(
	id_transportadora INT NOT NULL PRIMARY KEY,
    nome varchar(50) NOT NULL,
    cnpj varchar(18) UNIQUE NOT NULL,
    contato VARCHAR(150)
); 

CREATE TABLE Produtos (
    id_produto INT PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    modelo VARCHAR(100),
    preco DECIMAL(15,2),

    id_categoria INT,
    id_marca INT,
    id_fornecedor INT,

    FOREIGN KEY (id_categoria) REFERENCES Categorias(id_categoria),
    FOREIGN KEY (id_marca) REFERENCES Marcas(id_marca),
    FOREIGN KEY (id_fornecedor) REFERENCES Fornecedores(id_fornecedor)
);
CREATE TABLE Estoque (
    id_produto INT PRIMARY KEY,
    quantidade INT NOT NULL,

    FOREIGN KEY (id_produto) REFERENCES Produtos(id_produto)
);

CREATE TABLE Clientes
(
	 cod_cliente INT PRIMARY KEY,
     nome varchar(100) NOT NULL,
     email varchar(150) NOT NULL,
     telefone varchar(18),
     CPF varchar(11) UNIQUE NOT NULL	
);

CREATE TABLE Enderecos
(
	id_endereco INT PRIMARY KEY,
    estado VARCHAR(90) NOT NULL,
    cidade varchar(90) NOT NULL,
    bairro VARCHAR(90) NOT NULL,
    logradouro varchar(50) NOT NULL,
    numero INT,
    
    cod_cliente INT,
    
    FOREIGN KEY(cod_cliente) references Clientes(cod_cliente)
    
);

CREATE TABLE Pedidos 
(
	id_pedido INT PRIMARY KEY,
    status VARCHAR(40),
    data DATETIME,
	
    cod_cliente INT,
    
    FOREIGN KEY(cod_cliente) REFERENCES Clientes(cod_cliente)
);

CREATE TABLE Entregas
(
	id_entrega INT PRIMARY KEY,
    status VARCHAR(40),
    codigo_rastreio VARCHAR(100),
    data_envio DATETIME,
    data_entrega DATETIME,
    
    id_pedido INT,
	id_transportadora INT,
    
    FOREIGN KEY(id_pedido) REFERENCES Pedidos(id_pedido),
    FOREIGN KEY(id_transportadora) REFERENCES Transportadoras(id_transportadora)
);

CREATE TABLE Suporte_tecnico
(
	id_atendimento INT PRIMARY KEY,
    
    id_pedido INT NOT NULL,
    
    FOREIGN KEY(id_pedido) REFERENCES Pedidos(id_pedido)
);

CREATE TABLE Cartoes 
(
	id_forma_pagamento VARCHAR(50) PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    numero_cartao VARCHAR(19) UNIQUE NOT NULL,
    titular VARCHAR(100) NOT NULL, 
    validade DATE,
    cvv VARCHAR(4) NOT NULL,
    cod_cliente INT,
    
    FOREIGN KEY(cod_cliente) REFERENCES Clientes(cod_cliente)
    
);

CREATE TABLE Itens_pedidos
(
	id_item INT PRIMARY KEY,
    quantidade INT NOT NULL,
    preco_unitario DECIMAL(15,2) NOT NULL,
    
    id_pedido INT,
    id_produto INT,
    
    FOREIGN KEY(id_produto) REFERENCES Produtos(id_produto),
    FOREIGN KEY(id_pedido) REFERENCES Pedidos(id_pedido)
)

